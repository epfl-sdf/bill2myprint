{% extends "bill2myprint/base.html" %}
{% load static %}
{% load templatetags %}

{% block template_main %}

    {% if rallonge_list %}
        <div class="page-header">
          <h1>Rallonges facultaires</h1>
        </div>

        {# .... **Now the pagination section** .... #}
        {% if is_paginated %}
        <div class="pagination">
            <span class="page-links">
                {% if page_obj.has_previous %}
                <a href="?page={{ page_obj.previous_page_number }}">previous</a>
                {% endif %}
                <span class="page-current">
                    Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
                </span>
                {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}">next</a>
                {% endif %}
            </span>
        </div>
        {% endif %}

        <div class="row">
          <div>
            <table data-toggle="table" class="table table-striped table-bordered table-hover">
              <thead>
                <tr>
                  <th data-field="student" data-sortable="true">Etudiant</th>
                  <th data-field="amount" data-sortable="true">Montant</th>
                  <th data-field="faculty" data-sortable="true">Facult√©</th>
                </tr>
              </thead>
              <tbody>
          	{% for rallonge in rallonge_list %}
                <tr>
                  <td>{{ rallonge.entity.name }}</td>
                  <td>{{ rallonge.amount }}</td>
                  <td>{{ rallonge.transactiondata|cutre:"(Rallonge)|(\d{2}\.\d{4})|(_.*)|( )" }}</td>
		  <!-- Regex removes the "Rallonge", " ", date and anything else after "_" -->
                </tr>
          	{% endfor %}
              </tbody>
            </table>
          </div>
        </div>
        {# .... **Now the pagination section** .... #}
        {% if is_paginated %}
        <div class="pagination">
            <span class="page-links">
                {% if page_obj.has_previous %}
                <a href="?page={{ page_obj.previous_page_number }}">previous</a>
                {% endif %}
                <span class="page-current">
                    Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
                </span>
                {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}">next</a>
                {% endif %}
            </span>
        </div>
        {% endif %}
    {% elif rallonge2_list %}
        <div class="row">
          <div>
            <table data-toggle="table" class="table table-striped table-bordered table-hover">
              <thead>
                <tr>
                  <th data-field="faculty" data-sortable="true">Section</th>
                  <th data-field="date" data-sortable="true">Date</th>
                  <th data-field="amount" data-sortable="true">Montant</th>
                </tr>
              </thead>
              <tbody>
          	{% for rallonge in rallonge2_list %}
                <tr>
		  <!-- Regex removes the "Rallonge", " ", date and anything after "_" -->
                  <td>{{ rallonge.transactiondata|cutre:"(Rallonge)|(\d{2}\.\d{4})|(_.*)|( )" }}</td>
                  <td>{{ rallonge.amount }}</td>
                </tr>
          	{% endfor %}
              </tbody>
            </table>
          </div>
        </div>

    {% else %}
      <p>An error occurred. No data is available.</p>
    {% endif %}

{% endblock %}
